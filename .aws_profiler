# source this in your .*rc file, whether .bashrc or .zshrc (and maybe others), 
# ie. add following line:
# source PATH_TO/.aws_profiler

# switch aws profile
sp(){
    SP_ARG=$1
    
    if [ -n "$SP_ARG" ]; then
        CHECK_PROFILE=`grep "\[$SP_ARG\]" ~/.aws/credentials`
        if [ -n "$CHECK_PROFILE" ]; then
            echo "Setting AWS profile to $SP_ARG";
            export AWS_PROFILE=$SP_ARG
        else
            echo "AWS profile $1 does not exist"
        fi
    else
        echo "Setting AWS profile to NULL";
        export AWS_PROFILE=''
    fi
    
}

# show current aws profile
cap(){
    echo "Current AWS profile is set to: $AWS_PROFILE"
}

# reset aws profile and keys
resetp(){
    echo "Resetting AWS profile and keys"
    unset AWS_PROFILE
    unset AWS_ACCESS_KEY_ID
    unset AWS_SECRET_ACCESS_KEY
    unset AWS_SESSION_TOKEN
}